@startuml architecture_summary
!theme plain

title POS System - Clean Architecture Compliance Summary

package "EventManager Service - 7.5/10" #FFD700 {
    note as EM_S
        **Strengths:**
        Clear layer separation
        Domain-driven design
        Service layer with business logic
        HATEOAS REST API
    end note

    note as EM_W
        **Weaknesses:**
        Use cases bypass service layer
        Direct repository calls
    end note
}

package "User Service - 8.5/10" #90EE90 {
    note as US_S
        **Strengths:**
        Service layer EXISTS and used
        Good domain modeling
        Adapter pattern for externals
        Clean architecture followed
    end note

    note as US_W
        **Weaknesses:**
        DummyAuthorizationService
        Token in localStorage
    end note
}

package "IDM Service - 9.5/10" #90EE90 {
    note as IDM_S
        **Strengths:**
        Cleanest architecture
        Thin use cases
        Bcrypt password hashing
        JWT secret from env var
        RegisterUseCase exists
    end note

    note as IDM_W
        **Weaknesses:**
        No refresh token (minor)
    end note
}

package "Layer Analysis" {
    note as LAYERS
        **Presentation Layer:** 9/10
        **Application Layer:** 8.5/10
        **Domain Layer:** 10/10
        **Infrastructure Layer:** 9.5/10

        **Overall System: 8.5/10**
    end note
}

note bottom
    **Priority Action Items**

    1. Fix 2 EventManager layer violations
    2. Strengthen authorization (Zanzibar)
    3. Move token to httpOnly cookies
    4. Add refresh token support
end note

@enduml
