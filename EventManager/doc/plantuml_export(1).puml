@startuml
!theme vibrant

title Event Manager - System Architecture

package "External Libraries" {
  [Gin Framework] as Gin
  [GORM]
}

package "Infrastructure" {
  package "HTTP (Gin)" as GinHTTP {
    
    [Router]
    [Handlers] as GinHandlers
    [HTTP DTOs]
  }

  package "Persistence (Postgres)" as PostgresDB {
    [GORM Repositories] as GormRepos
    [GORM Models]
    [Connection]
  }
}

package "Application" {
  [Controllers]
  [Services]
  [Repository Interfaces]
  package "Domain" {
  [Domain Models]
  [Custom Errors]
}
}


[main.go] as Main

' --- Relationships ---

Main --> Connection: Initializes
Main --> GormRepos: Injects DB
Main --> Services: Injects Repositories
Main --> Controllers: Injects Services
Main --> GinHandlers: Injects Controllers
Main --> Router: Registers Routes

Router --> GinHandlers: Routes requests to
GinHandlers ..> Gin: Uses
GinHandlers --> Controllers: Calls
GinHandlers --> [HTTP DTOs]: Uses for request/response
GinHandlers --> [Custom Errors]: Handles

Controllers ..> Services: Depends on (Interfaces)
Services ..> [Repository Interfaces]: Depends on (Interfaces)

Services --> [Domain Models]: Uses
Services --> [Custom Errors]: Returns

GormRepos ..> GORM: Uses
GormRepos --> [GORM Models]: Maps to/from
GormRepos --> [Domain Models]: Converts to/from
GormRepos ..|> [Repository Interfaces]: Implements

[GORM Models] --> [Domain Models]: Converts to
[HTTP DTOs] --> [Domain Models]: Converts to/from

Connection ..> GORM: Uses

@enduml
